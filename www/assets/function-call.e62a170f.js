import{i as S,d as T,r as N,j as U,k as W,t as x,c as a,l as D,m as g,n as j,p as q,q as G,f as A,s as J,B as O,v as Q,x as V,y as Y,z as X,A as Z,C as ee,D as R,E as te,G as ne,P as oe,H as ae,I as _,J as le,K as se,L as re,M as ce,N as ie,O as ue,Q as de}from"./index.a0335495.js";const[H,E]=S("action-bar"),K=Symbol(H),fe={placeholder:Boolean,safeAreaInsetBottom:x};var me=T({name:H,props:fe,setup(e,{slots:l}){const o=N(),r=U(o,E),{linkChildren:c}=W(K);c();const m=()=>{var B;return a("div",{ref:o,class:[E(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=l.default)==null?void 0:B.call(l)])};return()=>e.placeholder?r(m):m()}});const Be=D(me),[ge,he]=S("action-bar-button"),Ce=g({},j,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var be=T({name:ge,props:Ce,setup(e,{slots:l}){const o=q(),{parent:r,index:c}=G(K),m=A(()=>{if(r){const i=r.children[c.value-1];return!(i&&"isButton"in i)}}),B=A(()=>{if(r){const i=r.children[c.value+1];return!(i&&"isButton"in i)}});return J({isButton:!0}),()=>{const{type:i,icon:h,text:C,color:y,loading:P,disabled:p}=e;return a(O,{class:he([i,{last:B.value,first:m.value}]),size:"large",type:i,icon:h,color:y,loading:P,disabled:p,onClick:o},{default:()=>[l.default?l.default():C]})}}});const I=D(be),[ve,u,w]=S("dialog"),we=g({},Q,{title:String,theme:String,width:V,message:[String,Function],callback:Function,allowHtml:Boolean,className:Y,transition:X("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),ye=[...Z,"transition","closeOnPopstate"];var $=T({name:ve,props:we,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:o}){const r=N(),c=ee({confirm:!1,cancel:!1}),m=t=>l("update:show",t),B=t=>{var s;m(!1),(s=e.callback)==null||s.call(e,t)},i=t=>()=>{!e.show||(l(t),e.beforeClose?(c[t]=!0,ce(e.beforeClose,{args:[t],done(){B(t),c[t]=!1},canceled(){c[t]=!1}})):B(t))},h=i("cancel"),C=i("confirm"),y=ae(t=>{var s,d;if(t.target!==((d=(s=r.value)==null?void 0:s.popupRef)==null?void 0:d.value))return;({Enter:e.showConfirmButton?C:_,Escape:e.showCancelButton?h:_})[t.key](),l("keydown",t)},["enter","esc"]),P=()=>{const t=o.title?o.title():e.title;if(t)return a("div",{class:u("header",{isolated:!e.message&&!o.default})},[t])},p=t=>{const{message:s,allowHtml:d,messageAlign:f}=e,v=u("message",{"has-title":t,[f]:f}),k=le(s)?s():s;return d&&typeof k=="string"?a("div",{class:v,innerHTML:k},null):a("div",{class:v},[k])},F=()=>{if(o.default)return a("div",{class:u("content")},[o.default()]);const{title:t,message:s,allowHtml:d}=e;if(s){const f=!!(t||o.title);return a("div",{key:d?1:0,class:u("content",{isolated:!f})},[p(f)])}},z=()=>a("div",{class:[re,u("footer")]},[e.showCancelButton&&a(O,{size:"large",text:e.cancelButtonText||w("cancel"),class:u("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(O,{size:"large",text:e.confirmButtonText||w("confirm"),class:[u("confirm"),{[se]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:C},null)]),L=()=>a(Be,{class:u("footer")},{default:()=>[e.showCancelButton&&a(I,{type:"warning",text:e.cancelButtonText||w("cancel"),class:u("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(I,{type:"danger",text:e.confirmButtonText||w("confirm"),class:u("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:C},null)]}),M=()=>o.footer?o.footer():e.theme==="round-button"?L():z();return()=>{const{width:t,title:s,theme:d,message:f,className:v}=e;return a(oe,R({ref:r,role:"dialog",class:[u([d]),v],style:{width:ne(t)},tabindex:0,"aria-labelledby":s||f,onKeydown:y,"onUpdate:show":m},te(e,ye)),{default:()=>[P(),F(),M()]})}}});let b;function Pe(){({instance:b}=ue({setup(){const{state:l,toggle:o}=de();return()=>a($,R(l,{"onUpdate:show":o}),null)}}))}function n(e){return ie?new Promise((l,o)=>{b||Pe(),b.open(g({},n.currentOptions,e,{callback:r=>{(r==="confirm"?l:o)(r)}}))}):Promise.resolve()}n.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};n.currentOptions=g({},n.defaultOptions);n.alert=n;n.confirm=e=>n(g({showCancelButton:!0},e));n.close=()=>{b&&b.toggle(!1)};n.setDefaultOptions=e=>{g(n.currentOptions,e)};n.resetDefaultOptions=()=>{n.currentOptions=g({},n.defaultOptions)};n.Component=D($);n.install=e=>{e.use(n.Component),e.config.globalProperties.$dialog=n};export{n as D};
