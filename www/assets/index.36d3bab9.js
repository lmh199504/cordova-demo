import{d as b,C as w,Y as y,r as p,f as q,c as e,a as l,b as n,T as h,Z as C,_ as d,$ as F,u as B}from"./index.a0335495.js";import{D as V}from"./function-call.e62a170f.js";const P="_login_7gqp2_1",x="_logo_7gqp2_7",k="_policy_7gqp2_40",a={login:P,logo:x,"logo-svg":"_logo-svg_7gqp2_13","login-form":"_login-form_7gqp2_17","field-wrapper":"_field-wrapper_7gqp2_20","remember-wrapper":"_remember-wrapper_7gqp2_23","remember-me":"_remember-me_7gqp2_27","login-btn":"_login-btn_7gqp2_31","disabled-btn":"_disabled-btn_7gqp2_35","policy-footer":"_policy-footer_7gqp2_40",policy:k},U=b({name:"Login",setup(){const s=w({username:"",password:""}),g=B(),v=y(),r=p(!1),t=p(!1),_=()=>{t.value=!t.value},u=p(!1),f=()=>{u.value=!0;const o=h.loading({message:"\u767B\u5F55\u4E2D...",duration:0,mask:!0,overlay:!0});v.login(s).then(()=>{u.value=!1,o.clear(),r.value?C(s):d(),g.replace("/")}).catch(i=>{let c="";i.status!=200?c="\u7F51\u7EDC\u9519\u8BEF\uFF0C\u7A0D\u540E\u518D\u8BD5~":c=i.data.msg||"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u7A0D\u540E\u518D\u8BD5~",console.log(i),o.clear(),u.value=!1,d(),V.alert({title:"\u767B\u5F55\u5931\u8D25",message:c,confirmButtonColor:"#00A9A9"}).then(()=>{})})},m=q(()=>s.password&&s.username);return(()=>{const o=F();(o==null?void 0:o.username)&&(o==null?void 0:o.password)&&(r.value=!0,s.username=o.username,s.password=o.password)})(),()=>e("div",{class:a.login},[e("div",{class:a.logo},[e(l("svg-icon"),{name:"logo",class:a["logo-svg"]},null)]),e("div",{class:[a["login-form"],"login-form"]},[e(l("van-form"),{"label-width":"60px"},{default:()=>[e("div",{class:a["field-wrapper"]},[e(l("van-field"),{modelValue:s.username,"onUpdate:modelValue":o=>s.username=o,name:"\u8D26\u53F7",label:"",placeholder:"\u8D26\u53F7"},null)]),e("div",{class:a["field-wrapper"]},[e(l("van-field"),{modelValue:s.password,"onUpdate:modelValue":o=>s.password=o,type:t.value?"text":"password",name:"\u5BC6\u7801",label:"",placeholder:"\u5BC6\u7801",autocomplete:"autocomplete"},{"right-icon":()=>e("div",{onClick:_},[t.value?e(l("van-icon"),{name:"eye-o",size:"18"},null):e(l("van-icon"),{name:"closed-eye",size:"18"},null)])})]),e("div",{class:a["remember-wrapper"]},[e(l("van-checkbox"),{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o},{default:()=>[e("span",{class:a["remember-me"]},[n("\u8BB0\u4F4F\u5BC6\u7801")])]})]),e(l("van-button"),{onClick:f,class:[a["login-btn"],m.value?"":a["disabled-btn"]],disabled:!m.value,block:!0,type:"primary"},{default:()=>[n("\u767B\u5F55")]})]})]),e("div",{class:a["policy-footer"]},[n("\u767B\u5F55\u4EE3\u8868\u60A8\u5DF2\u540C\u610F "),e("span",{class:a.policy},[n("\u7528\u6237\u534F\u8BAE")]),n(" \u548C")," ",e("span",{class:a.policy},[n("\u9690\u79C1\u653F\u7B56")])])])}});export{U as default};
